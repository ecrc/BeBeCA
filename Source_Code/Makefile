CC=g++
CFLAGS=-std=c++11
DIR=src/
APPROX_SOURCES=$(DIR)_bc.cc
DEPS=$(DIR)bc.h $(DIR)graph_t.h $(DIR)iter_info_t.h $(DIR)types.h $(DIR)utility.h

RAND1_EXECUTABLE=RAND1
GSIZE_EXECUTABLE=GSIZE
KPATH_EXECUTABLE=KPATH
EGO_EXECUTABLE=EGO
PBRANDES_EXECUTABLE=Parallel_Brandes
NETWORKIT_EXECUTABLE=ApproxKit

RAND1_SOURCES=$(DIR)RAND1.cc $(APPROX_SOURCES)
GSIZE_SOURCES=$(DIR)GSIZE.cc $(APPROX_SOURCES)
KPATH_SOURCES=$(DIR)KPATH.cc $(APPROX_SOURCES)
EGO_SOURCES=$(DIR)EGO.cc $(APPROX_SOURCES)
PBRANDES_SOURCES=$(DIR)PBrandes.cc $(DIR)p_bc.cc
NETWORKIT_SOURCES=$(DIR)NetworKitApps.cpp

all: $(RAND1_EXECUTABLE) $(GSIZE_EXECUTABLE) $(KPATH_EXECUTABLE) $(EGO_EXECUTABLE) $(PBRANDES_EXECUTABLE) $(NETWORKIT_EXECUTABLE)

$(RAND1_EXECUTABLE):$(RAND1_SOURCES) $(DEPS)
	$(CC) $(CFLAGS) $(RAND1_SOURCES) -o $(RAND1_EXECUTABLE)
$(GSIZE_EXECUTABLE):$(GSIZE_SOURCES) $(DEPS)
	$(CC) $(CFLAGS) $(GSIZE_SOURCES) -o $(GSIZE_EXECUTABLE)
$(KPATH_EXECUTABLE):$(KPATH_SOURCES) $(DEPS)
	$(CC) $(CFLAGS) $(KPATH_SOURCES) -o $(KPATH_EXECUTABLE)
$(EGO_EXECUTABLE):$(EGO_SOURCES) $(DEPS)
	$(CC) $(CFLAGS) $(EGO_SOURCES) -o $(EGO_EXECUTABLE)	
$(PBRANDES_EXECUTABLE):$(PBRANDES_SOURCES) $(DEPS)
	mpic++ $(CFLAGS) $(PBRANDES_SOURCES) -o $(PBRANDES_EXECUTABLE)
$(NETWORKIT_EXECUTABLE):$(NETWORKIT_SOURCES)
	$(CC) $(CFLAGS) $(NETWORKIT_SOURCES) -o $(NETWORKIT_EXECUTABLE) -lNetworKit -fopenmp -lnlopt
	
clean_RAND1:
	rm *o $(RAND1_EXECUTABLE)
clean_GSIZE:
	rm *o $(GSIZE_EXECUTABLE)
clean_KPATH:
	rm *o $(KPATH_EXECUTABLE)
clean_EGO:
	rm *o $(EGO_EXECUTABLE)
clean_PBRANDES:
	rm *o $(PBRANDES_EXECUTABLE)
clean_NETWORKIT:
	rm *o $(NETWORKIT_EXECUTABLE)
